{% extends 'frontoffice/base.html.twig' %}

{% block title %}Home - {{ parent() }}{% endblock %}

{% block body %}
<div class="space-y-6">
    <!-- Welcome Section -->
    <div class="bg-white shadow sm:rounded-lg">
        <div class="px-4 py-5 sm:p-6">
            <h3 class="text-base font-semibold leading-6 text-gray-900">Welcome, {{ app.user.name }}!</h3>
            <div class="mt-2 max-w-xl text-sm text-gray-500">
                <p>Here's what's happening in your sports club today.</p>
            </div>
        </div>
    </div>

    <!-- Upcoming Matches -->
    <div class="bg-white shadow sm:rounded-lg">
        <div class="px-4 py-5 sm:p-6">
            <h3 class="text-base font-semibold leading-6 text-gray-900">Upcoming Matches</h3>
            <div class="mt-4">
                {% if data.upcomingMatches is empty %}
                    <p class="text-sm text-gray-500">No upcoming matches scheduled.</p>
                {% else %}
                    <ul role="list" class="divide-y divide-gray-100">
                        {% for match in data.upcomingMatches %}
                            <li class="flex items-center justify-between gap-x-6 py-5">
                                <div class="min-w-0">
                                    <div class="flex items-start gap-x-3">
                                        <p class="text-sm font-semibold leading-6 text-gray-900">{{ match.displayTitle }}</p>
                                    </div>
                                    <div class="mt-1 flex items-center gap-x-2 text-xs leading-5 text-gray-500">
                                        <p>{{ match.date|date('F j, Y') }}</p>
                                        <svg viewBox="0 0 2 2" class="h-0.5 w-0.5 fill-current">
                                            <circle cx="1" cy="1" r="1" />
                                        </svg>
                                        <p>{{ match.location }}</p>
                                    </div>
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Recent Trainings -->
    <div class="bg-white shadow sm:rounded-lg">
        <div class="px-4 py-5 sm:p-6">
            <h3 class="text-base font-semibold leading-6 text-gray-900">Recent Trainings</h3>
            <div class="mt-4">
                {% if data.recentTrainings is empty %}
                    <p class="text-sm text-gray-500">No recent trainings.</p>
                {% else %}
                    <ul role="list" class="divide-y divide-gray-100">
                        {% for training in data.recentTrainings %}
                            <li class="flex items-center justify-between gap-x-6 py-5">
                                <div class="min-w-0">
                                    <div class="flex items-start gap-x-3">
                                        <p class="text-sm font-semibold leading-6 text-gray-900">{{ training.title }}</p>
                                    </div>
                                    <div class="mt-1 flex items-center gap-x-2 text-xs leading-5 text-gray-500">
                                        <p>{{ training.date|date('F j, Y') }}</p>
                                        <svg viewBox="0 0 2 2" class="h-0.5 w-0.5 fill-current">
                                            <circle cx="1" cy="1" r="1" />
                                        </svg>
                                        <p>{{ training.location }}</p>
                                    </div>
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
        </div>
    </div>

    {% if is_granted('ROLE_ADMIN') %}
        <!-- Admin Dashboard -->
        <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
            <!-- Teams Overview -->
            <div class="bg-white shadow sm:rounded-lg">
                <div class="px-4 py-5 sm:p-6">
                    <h3 class="text-base font-semibold leading-6 text-gray-900">Teams Overview</h3>
                    <div class="mt-4">
                        {% if data.teams is empty %}
                            <p class="text-sm text-gray-500">No teams registered.</p>
                        {% else %}
                            <ul role="list" class="divide-y divide-gray-100">
                                {% for team in data.teams %}
                                    <li class="flex items-center justify-between gap-x-6 py-5">
                                        <div class="min-w-0">
                                            <p class="text-sm font-semibold leading-6 text-gray-900">{{ team.name }}</p>
                                            <p class="mt-1 text-xs leading-5 text-gray-500">{{ team.players|length }} players</p>
                                        </div>
                                    </li>
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- All Trainings -->
            <div class="bg-white shadow sm:rounded-lg">
                <div class="px-4 py-5 sm:p-6">
                    <h3 class="text-base font-semibold leading-6 text-gray-900">All Trainings</h3>
                    <div class="mt-4">
                        {% if data.allTrainings is empty %}
                            <p class="text-sm text-gray-500">No trainings scheduled.</p>
                        {% else %}
                            <ul role="list" class="divide-y divide-gray-100">
                                {% for training in data.allTrainings %}
                                    <li class="flex items-center justify-between gap-x-6 py-5">
                                        <div class="min-w-0">
                                            <p class="text-sm font-semibold leading-6 text-gray-900">{{ training.title }}</p>
                                            <p class="mt-1 text-xs leading-5 text-gray-500">{{ training.coach.name }}</p>
                                        </div>
                                    </li>
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    {% endif %}

    {% if is_granted('ROLE_COACH') %}
        <!-- Coach Dashboard -->
        <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
            <!-- My Teams -->
            <div class="bg-white shadow sm:rounded-lg">
                <div class="px-4 py-5 sm:p-6">
                    <h3 class="text-base font-semibold leading-6 text-gray-900">My Teams</h3>
                    <div class="mt-4">
                        {% if data.myTeams is empty %}
                            <p class="text-sm text-gray-500">You are not assigned to any teams.</p>
                        {% else %}
                            <ul role="list" class="divide-y divide-gray-100">
                                {% for team in data.myTeams %}
                                    <li class="flex items-center justify-between gap-x-6 py-5">
                                        <div class="min-w-0">
                                            <p class="text-sm font-semibold leading-6 text-gray-900">{{ team.name }}</p>
                                            <p class="mt-1 text-xs leading-5 text-gray-500">{{ team.players|length }} players</p>
                                        </div>
                                    </li>
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- My Trainings -->
            <div class="bg-white shadow sm:rounded-lg">
                <div class="px-4 py-5 sm:p-6">
                    <h3 class="text-base font-semibold leading-6 text-gray-900">My Trainings</h3>
                    <div class="mt-4">
                        {% if data.myTrainings is empty %}
                            <p class="text-sm text-gray-500">No trainings scheduled.</p>
                        {% else %}
                            <ul role="list" class="divide-y divide-gray-100">
                                {% for training in data.myTrainings %}
                                    <li class="flex items-center justify-between gap-x-6 py-5">
                                        <div class="min-w-0">
                                            <p class="text-sm font-semibold leading-6 text-gray-900">{{ training.title }}</p>
                                            <p class="mt-1 text-xs leading-5 text-gray-500">{{ training.date|date('F j, Y') }}</p>
                                        </div>
                                    </li>
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    {% endif %}

    {% if is_granted('ROLE_PLAYER') %}
        <!-- Player Dashboard -->
        <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
            <!-- My Team -->
            <div class="bg-white shadow sm:rounded-lg">
                <div class="px-4 py-5 sm:p-6">
                    <h3 class="text-base font-semibold leading-6 text-gray-900">My Team</h3>
                    <div class="mt-4">
                        {% if data.myTeam is null %}
                            <p class="text-sm text-gray-500">You are not assigned to any team.</p>
                        {% else %}
                            <div class="min-w-0">
                                <p class="text-sm font-semibold leading-6 text-gray-900">{{ data.myTeam.name }}</p>
                                <p class="mt-1 text-xs leading-5 text-gray-500">Coach: {{ data.myTeam.coach.name }}</p>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- My Trainings -->
            <div class="bg-white shadow sm:rounded-lg">
                <div class="px-4 py-5 sm:p-6">
                    <h3 class="text-base font-semibold leading-6 text-gray-900">My Trainings</h3>
                    <div class="mt-4">
                        {% if data.myTrainings is empty %}
                            <p class="text-sm text-gray-500">No trainings scheduled.</p>
                        {% else %}
                            <ul role="list" class="divide-y divide-gray-100">
                                {% for training in data.myTrainings %}
                                    <li class="flex items-center justify-between gap-x-6 py-5">
                                        <div class="min-w-0">
                                            <p class="text-sm font-semibold leading-6 text-gray-900">{{ training.title }}</p>
                                            <p class="mt-1 text-xs leading-5 text-gray-500">{{ training.date|date('F j, Y') }}</p>
                                        </div>
                                    </li>
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %} 